
((digest . "fddea5b8d21220e5a090e327462f7080") (undo-list nil (9693 . 9698) nil ("o" . -9693) ((marker . 9699) . -1) ("b" . -9694) ((marker . 9699) . -1) ("j" . -9695) ((marker . 9699) . -1) ("v" . -9696) ((marker . 9699) . -1) ("a" . -9697) ((marker . 9699) . -1) ("r" . -9698) ((marker . 9699) . -1) 9699 nil (9601 . 9606) nil ("o" . -9601) ((marker . 9699) . -1) ((marker . 9601) . -1) ("b" . -9602) ((marker . 9699) . -1) ((marker . 9601) . -1) ("j" . -9603) ((marker . 9699) . -1) ((marker . 9601) . -1) ("v" . -9604) ((marker . 9699) . -1) ((marker . 9601) . -1) ("a" . -9605) ((marker . 9699) . -1) ((marker . 9601) . -1) ("r" . -9606) ((marker . 9699) . -1) ((marker . 9601) . -1) 9607 nil ("        " . -9558) ((marker . 9558) . -8) 9568 nil (nil fontified nil 9784 . 9785) (nil fontified nil 9767 . 9784) (nil fontified nil 9743 . 9767) (nil fontified nil 9740 . 9743) (nil fontified nil 9734 . 9740) (nil fontified nil 9724 . 9734) (nil fontified nil 9718 . 9724) (nil fontified nil 9717 . 9718) (nil fontified nil 9716 . 9717) (nil fontified nil 9687 . 9716) (nil fontified nil 9686 . 9687) (nil fontified nil 9674 . 9686) (nil fontified nil 9672 . 9674) (nil fontified nil 9664 . 9672) (nil fontified nil 9660 . 9664) (nil fontified nil 9658 . 9660) (nil fontified nil 9650 . 9658) (nil fontified nil 9647 . 9650) (nil fontified nil 9641 . 9647) (nil fontified nil 9631 . 9641) (nil fontified nil 9625 . 9631) (nil fontified nil 9624 . 9625) (nil fontified nil 9623 . 9624) (nil fontified nil 9594 . 9623) (nil fontified nil 9593 . 9594) (nil fontified nil 9581 . 9593) (nil fontified nil 9573 . 9581) (nil fontified nil 9572 . 9573) (nil fontified nil 9568 . 9572) (nil fontified nil 9566 . 9568) (nil fontified nil 9558 . 9566) (9558 . 9785) nil (9549 . 9558) (t 23612 17915 246435 371000) nil (8740 . 8746) ("ta" . -8740) ((marker . 9699) . -2) 8742 nil (8738 . 8742) nil (8711 . 8718) nil (8707 . 8711) nil ("_timings" . -8707) ((marker . 9699) . -8) 8715 nil (8647 . 8653) ("tar" . -8647) ((marker . 9699) . -3) 8650 nil (8645 . 8650) nil (" " . -8645) ((marker . 9699) . -1) 8646 nil (8645 . 8646) nil (8615 . 8625) nil ("t" . -8615) ((marker . 9699) . -1) ("i" . -8616) ((marker . 9699) . -1) ("m" . -8617) ((marker . 9699) . -1) ("i" . -8618) ((marker . 9699) . -1) ("n" . -8619) ((marker . 9699) . -1) ("g" . -8620) ((marker . 9699) . -1) ("s" . -8621) ((marker . 9699) . -1) 8622 nil (8575 . 8578) nil ("v" . -8575) ((marker . 9699) . -1) 8576 nil (8572 . 8576) nil (8563 . 8572) nil ("        " . -8572) 8582 nil (nil rear-nonsticky nil 8761 . 8762) (nil fontified nil 8744 . 8762) (nil fontified nil 8720 . 8744) (nil fontified nil 8709 . 8720) (nil fontified nil 8703 . 8709) (nil fontified nil 8702 . 8703) (nil fontified nil 8701 . 8702) (nil fontified nil 8675 . 8701) (nil fontified nil 8674 . 8675) (nil fontified nil 8662 . 8674) (nil fontified nil 8660 . 8662) (nil fontified nil 8652 . 8660) (nil fontified nil 8648 . 8652) (nil fontified nil 8646 . 8648) (nil fontified nil 8638 . 8646) (nil fontified nil 8627 . 8638) (nil fontified nil 8621 . 8627) (nil fontified nil 8620 . 8621) (nil fontified nil 8619 . 8620) (nil fontified nil 8593 . 8619) (nil fontified nil 8592 . 8593) (nil fontified nil 8572 . 8592) (8572 . 8762) nil (8563 . 8572) (t 23612 17864 941933 162000) nil (8005 . 8013) nil (7976 . 7985) nil ("t" . -7976) ((marker . 9699) . -1) ("i" . -7977) ((marker . 9699) . -1) 7978 nil ("m" . -7978) ((marker . 9699) . -1) ("i" . -7979) ((marker . 9699) . -1) ("n" . -7980) ((marker . 9699) . -1) ("g" . -7981) ((marker . 9699) . -1) ("s" . -7982) ((marker . 9699) . -1) 7983 nil (7913 . 7921) nil (7891 . 7893) nil ("2" . -7891) ((marker . 9699) . -1) 7892 nil (7884 . 7892) nil ("t" . -7884) ((marker . 9699) . -1) ("i" . -7885) ((marker . 9699) . -1) ("m" . -7886) ((marker . 9699) . -1) ("i" . -7887) ((marker . 9699) . -1) ("n" . -7888) ((marker . 9699) . -1) ("g" . -7889) ((marker . 9699) . -1) ("s" . -7890) ((marker . 9699) . -1) 7891 nil (" " . -7847) ((marker . 9699) . -1) 7848 nil (7841 . 7848) nil (7832 . 7841) nil ("        " . -7841) 7851 nil (nil rear-nonsticky nil 8030 . 8031) (nil fontified nil 8013 . 8031) (nil fontified nil 7989 . 8013) (nil fontified nil 7978 . 7989) (nil fontified nil 7972 . 7978) (nil fontified nil 7971 . 7972) (nil fontified nil 7970 . 7971) (nil fontified nil 7944 . 7970) (nil fontified nil 7943 . 7944) (nil fontified nil 7931 . 7943) (nil fontified nil 7929 . 7931) (nil fontified nil 7921 . 7929) (nil fontified nil 7917 . 7921) (nil fontified nil 7915 . 7917) (nil fontified nil 7907 . 7915) (nil fontified nil 7896 . 7907) (nil fontified nil 7890 . 7896) (nil fontified nil 7889 . 7890) (nil fontified nil 7888 . 7889) (nil fontified nil 7862 . 7888) (nil fontified nil 7861 . 7862) (nil fontified nil 7841 . 7861) (7841 . 8031) nil (7832 . 7841) (t 23612 17775 52552 923000) nil (7851 . 7860) nil ("
    def plot_touch_timings(self, ref, ref_pred, peg, xlim=[5000, 130000]):
        switch = self.switching_timings(data)
        fig, ax = plt.subplots(1, 1, figsize=(8, 5))
        ax.plot(ref, np.ones(len(ref)), color='cornflowerblue', marker='.', linestyle='None', label='observed')
        ax.plot(ref_pred, np.zeros(len(ref_pred)), color='orange', marker='.', linestyle='None', label='predicted')
        ax.plot(peg, -1 * np.ones(len(peg)), color='black', marker='.', linestyle='None', label='peg ({0})'.format(target))
        for i in range(len(switch)):
            if i % 2 == 1 and i < len(switch) - 1:
                ax.axvspan(switch[i], switch[i+1], color='gray', alpha=0.1)
        ax.set_yticks([-1, 0, 1])
        ax.set_yticklabels(['peg ({0})'.format(target), 'predicted', 'observed'])
        ax.set_ylim(-2, 2)
        ax.set_xlim(xlim[0], xlim[1])
        ax.legend(loc='upper right')
        plt.show()
" . 7851) ((marker . 9655) . -928) ((marker . 8077) . -5) ((marker . 3539) . -22) ((marker . 9699) . -928) ((marker) . -928) 8779 nil (nil rear-nonsticky nil 7850 . 7851) (nil fontified nil 6862 . 7851) (6862 . 7851) nil (6857 . 6862) (t 23612 17581 145775 231000) nil (6853 . 6857) ("プロット" . -6853) ((marker . 9699) . -4) (6853 . 6857) ("プロッt" . -6853) ((marker . 9699) . -4) (6853 . 6857) ("プロt" . -6853) ((marker . 9699) . -3) (6853 . 6856) ("プロ" . -6853) ((marker . 9699) . -2) (6853 . 6855) ("ぷr" . -6853) ((marker . 9699) . -2) (6853 . 6855) ("ぷ" . -6853) ((marker . 9699) . -1) (6853 . 6854) ("p" . -6853) ((marker . 9699) . -1) (6852 . 6854) nil ("を" . -6852) ((marker . 9699) . -1) (6852 . 6853) ("w" . -6852) ((marker . 9699) . -1) (6852 . 6853) ("w" . -6852) ((marker . 9699) . -1) 6853 nil (6849 . 6853) ("予測値w" . -6849) ((marker . 9699) . -4) (6849 . 6853) ("予測値" . -6849) ((marker . 9699) . -3) (6849 . 6852) ("予測t" . -6849) ((marker . 9699) . -3) (6849 . 6852) ("予測" . -6849) ((marker . 9699) . -2) (6849 . 6851) ("よそk" . -6849) ((marker . 9699) . -3) (6849 . 6852) ("よそ" . -6849) ((marker . 9699) . -2) (6849 . 6851) ("よs" . -6849) ((marker . 9699) . -2) (6849 . 6851) ("よs" . -6849) (6849 . 6851) ("y" . -6849) ((marker . 9699) . -1) (6849 . 6850) ("よ" . -6849) ((marker . 9699) . -1) (6849 . 6850) ("よお" . -6849) ((marker . 9699) . -2) (6849 . 6851) ("よおs" . -6849) ((marker . 9699) . -3) (6849 . 6852) ("よおsく" . -6849) ((marker . 9699) . -4) (6849 . 6853) ("よおsk" . -6849) ((marker . 9699) . -4) (6849 . 6853) ("よおs" . -6849) ((marker . 9699) . -3) (6849 . 6852) ("よおs" . -6849) (6849 . 6852) ("よ" . -6849) ((marker . 9699) . -1) (6849 . 6850) ("y" . -6849) ((marker . 9699) . -1) (6845 . 6850) ("観測値と" . -6845) ((marker . 9699) . -4) (6845 . 6849) ("観測値t" . -6845) ((marker . 9699) . -4) (6845 . 6849) ("観測値" . -6845) ((marker . 9699) . -3) (6845 . 6848) ("観測t" . -6845) ((marker . 9699) . -3) (6845 . 6848) ("観測" . -6845) ((marker . 9699) . -2) (6845 . 6847) ("かんそk" . -6845) ((marker . 9699) . -4) (6845 . 6849) ("かんそ" . -6845) ((marker . 9699) . -3) (6845 . 6848) ("かんs" . -6845) ((marker . 9699) . -3) (6845 . 6848) ("かn" . -6845) ((marker . 9699) . -2) (6845 . 6847) ("か" . -6845) ((marker . 9699) . -1) (6845 . 6846) ("k" . -6845) ((marker . 9699) . -1) (6836 . 6846) ("タッチタイミングの" . -6836) ((marker . 9699) . -9) (6836 . 6845) ("タッチタイミングn" . -6836) ((marker . 9699) . -9) (6836 . 6845) ("タッチタイミング" . -6836) ((marker . 9699) . -8) (6836 . 6844) ("タッチタイミンg" . -6836) ((marker . 9699) . -8) (6836 . 6844) ("タッチタイミン" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチタイミn" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチタイミ" . -6836) ((marker . 9699) . -6) (6836 . 6842) ("タッチたいm" . -6836) ((marker . 9699) . -6) (6836 . 6842) ("タッチたい" . -6836) ((marker . 9699) . -5) (6836 . 6841) ("タッチたいm" . -6836) ((marker . 9699) . -6) (6836 . 6842) ("タッチ対mき" . -6836) ((marker . 9699) . -6) (6836 . 6842) ("タッチ対mきん" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチ対mきんぐ" . -6836) ((marker . 9699) . -8) (6836 . 6844) ("タッチ対mきんg" . -6836) ((marker . 9699) . -8) (6836 . 6844) ("タッチ対mきん" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチ対mきn" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチ対mき" . -6836) ((marker . 9699) . -6) (6836 . 6842) ("タッチたいmk" . -6836) ((marker . 9699) . -7) (6836 . 6843) ("タッチたいmk" . -6836) (6836 . 6843) ("タッチたい" . -6836) ((marker . 9699) . -5) 6841 nil (6836 . 6841) ("タッチた" . -6836) ((marker . 9699) . -4) (6836 . 6840) ("タッチt" . -6836) ((marker . 9699) . -4) (6836 . 6840) ("タッチ" . -6836) ((marker . 9699) . -3) (6836 . 6839) ("タッt" . -6836) ((marker . 9699) . -3) (6836 . 6839) ("たt" . -6836) ((marker . 9699) . -2) (6836 . 6838) ("た" . -6836) ((marker . 9699) . -1) (6836 . 6837) ("t" . -6836) ((marker . 9699) . -1) (6834 . 6837) nil (6829 . 6834) nil (nil rear-nonsticky nil 7755 . 7756) (nil fontified nil 6834 . 7756) (6834 . 7756) nil (6830 . 6834) ("    " . 6829) ((marker . 9699) . -4) (6828 . 6834) (t 23612 14425 784572 612000) nil (6363 . 6368) (t 23612 14418 9182 370000) nil (8927 . 8932) nil (5679 . 5691) ("is_normali" . -5679) ((marker . 9699) . -10) 5689 nil (5686 . 5689) nil (5715 . 5717) nil ("e" . -5715) ((marker . 9699) . -1) 5716 nil (5715 . 5716) nil ("e" . -5715) ((marker . 9699) . -1) 5716 nil (5712 . 5716) (t 23612 14135 716976 465000) nil (4939 . 9090) ("
    def calc_interval(self, timestamp, ref, time_axis):
        intr = np.array([])
        # next
        if time_axis == 'next':
            for t in ref[1:-1]:
                indices = np.where(timestamp <= t)
                intr = np.hstack((intr, timestamp[indices[0][-1] + 1] - t))
        # previous
        elif time_axis == 'prev':
            for t in ref[1:-1]:
                indices = np.where(timestamp < t)
                intr = np.hstack((intr, timestamp[indices[0][-1]] - t))
        return intr
    
    def set_var(self, obj_var, obj_name, exp_var, exp_name):
        self.obj_var = obj_var
        self.exp_var = exp_var
        self.obj_name = obj_name
        self.exp_name = exp_name
        
    def linear_regression(self, is_norm=True):
        if is_norm:
            x = normalize(*self.exp_var)
            y = normalize(obj_var)
        else:
            x = self.exp_var
            y = self.obj_var
            
        x_name = self.exp_name
        y_name = self.obj_name
        df_y = pd.DataFrame({y_name: y})        
        df_x = {}
        for i in range(len(x_name)):
            df_x[x_name[i]] = x[i]
        df_x = pd.DataFrame(df_x)
        X = df_x.values
        Y = df_y.values
        model = linear_model.LinearRegression()
        model.fit(X, Y)
        mse = mean_squared_error(Y, model.predict(X))
        predicted_Y = model.predict(X)
        # 標準化して推定した結果を元のスケールに戻す
        if is_norm:
            predicted_Y = predicted_Y * np.std(self.obj_var) + np.mean(self.obj_var)
        self.obj_var_pred = predicted_Y.flatten()
        
        return model, mse
    
    # 変数の標準化    
    def normalize(*x):
        if len(x) == 1:
            return (x[0] - np.mean(x[0])) / np.std(x[0])                
        else:            
            new_x = []
            for i in range(len(x)):
                new_x.append((x[i] - np.mean(x[i])) / np.std(x[i]))
        return new_x
    
    # 目的変数の観測値と予測値をプロット
    def plot_obj_var(self, ref):
        fig, ax = plt.subplots(1, 1, figsize=(8, 5))
        ax.plot(ref[1:-1], self.obj_var, color='cornflowerblue', label='observed')
        ax.plot(ref[1:-1], self.obj_var_pred, color='orange', label='predicted')
        ax.set_title('Intervals of {0}'.format(self.obj_name))
        ax.set_ylabel('Intervals of {0}'.format(self.obj_name))
        ax.set_xlabel('time')
        ax.legend()
        plt.show()
        
    def plot_error(self, data, ref):
        # ペグパターン切り替えタイミングを計算
        period = 11
        idx1, idx2 = 3, 7  # 切り替わるタイミングのインデックス（それぞれの系列における最初の値）
        switch = np.hstack((data.peg_l[idx1::period], data.peg_l[idx2::period]))
        switch = np.sort(switch)
        
        fig, ax = plt.subplots(1, 1, figsize=(8, 5))
        ax.plot(ref[1:-1], self.obj_var_pred - self.obj_var, label='error')      
        for i in range(len(switch)):
            if i % 2 == 1 and i < len(switch) - 1:
                ax.axvspan(switch[i], switch[i+1], color='gray', alpha=0.1)
        ax.set_xlabel('time')
        ax.set_ylabel('predicted obj_var - obj_var')
        ax.set_title('Error')
        ax.legend(loc='upper right')
        plt.show()        


project = 'mouse'        
datafile = 'mouse_data.csv'
unit_num = 18
data = ObsData(datafile)
# data.plot_timestamps()

target = 'left'

if target == 'right':
    ref = data.touch_r
    interval = Interval(data, ref)
    obj_var = interval.touch_r_next  # 目的変数
    obj_name = \"touch right (next)\"
elif target == 'left':
    ref = data.touch_l
    interval = Interval(data, ref)
    obj_var = interval.touch_l_next
    obj_name = \"touch left (next)\"

exp_var = [interval.touch_l_prev, interval.touch_r_prev, interval.peg_r_next, interval.peg_r_prev, interval.peg_l_next, interval.peg_l_prev]  # 説明変数
exp_name = [\"touch left (prev)\", \"touch right (prev)\", \"peg right (next)\", \"peg right (prev)\", \"peg left (next)\", \"peg left (prev)\"]
interval.set_var(obj_var, obj_name, exp_var, exp_name)

model, mse = interval.linear_regression(is_norm=False)

print(mse)
interval.plot_obj_var(ref)
interval.plot_error(data, ref)
coef = pd.DataFrame({'explanatory variables':exp_name, 'coefficient': model.coef_[0]" . 4939) ((marker . 9558) . -3168) ((marker . 4939) . -3168) ((marker . 4939) . -3168) ((marker . 4939) . -3168) ((marker . 4939) . -3168) ((marker . 9655) . -2915) ((marker . 9733) . -2991) ((marker . 4939) . -3168) ((marker . 7833) . -2915) ((marker . 3539) . -3168) ((marker . 9699) . -2915) 7803 (t 23612 8920 947069 539000) nil ("

class Interval:
    # ref: インターバルをとる際の基準となるタイムスタンプ
    def __init__(self, data, ref):
        self.touch_r_next = self.calc_interval(data.touch_r, ref, 'next')
        self.touch_r_prev = self.calc_interval(data.touch_r, ref, 'prev')
        self.touch_l_next = self.calc_interval(data.touch_l, ref, 'next')
        self.touch_l_prev = self.calc_interval(data.touch_l, ref, 'prev')
        self.peg_r_next = self.calc_interval(data.peg_r, ref, 'next')
        self.peg_r_prev = self.calc_interval(data.peg_r, ref, 'prev')
        self.peg_l_next = self.calc_interval(data.peg_l, ref, 'next')
        self.peg_l_prev = self.calc_interval(data.peg_l, ref, 'prev')

    def calc_interval(self, timestamp, ref, time_axis):
        intr = np.array([])
        # next
        if time_axis == 'next':
            for t in ref[1:-1]:
                indices = np.where(timestamp <= t)
                intr = np.hstack((intr, timestamp[indices[0][-1] + 1] - t))
        # previous
        elif time_axis == 'prev':
            for t in ref[1:-1]:
                indices = np.where(timestamp < t)
                intr = np.hstack((intr, timestamp[indices[0][-1]] - t))
        return intr

    def set_var(self, obj_var, obj_name, exp_var, exp_name):
        self.obj_var = obj_var
        self.exp_var = exp_var
        self.obj_name = obj_name
        self.exp_name = exp_name

    def linear_regression(self, is_norm=True):
        if is_norm:
            x = normalize(*self.exp_var)
            y = normalize(obj_var)
        else:
            x = self.exp_var
            y = self.obj_var
            
        x_name = self.exp_name
        y_name = self.obj_name
        df_y = pd.DataFrame({y_name: y})        
        df_x = {}
        for i in range(len(x_name)):
            df_x[x_name[i]] = x[i]
        df_x = pd.DataFrame(df_x)
        X = df_x.values
        Y = df_y.values
        model = linear_model.LinearRegression()
        model.fit(X, Y)
        mse = mean_squared_error(Y, model.predict(X))
        predicted_Y = model.predict(X)
        # 標準化して推定した結果を元のスケールに戻す
        if is_norm:
            predicted_Y = predicted_Y * np.std(self.obj_var) + np.mean(self.obj_var)
        self.obj_var_pred = predicted_Y.flatten()
        
        return model, mse
    
    # 変数の標準化    
    def normalize(*x):
        if len(x) == 1:
            return (x[0] - np.mean(x[0])) / np.std(x[0])                
        else:            
            new_x = []
            for i in range(len(x)):
                new_x.append((x[i] - np.mean(x[i])) / np.std(x[i]))
        return new_x

    # 目的変数の観測値と予測値をプロット
    def plot_obj_var(self, ref):
        fig, ax = plt.subplots(1, 1, figsize=(6, 3))
        ax.plot(ref[1:-1], self.obj_var, color='cornflowerblue', label='observed')
        ax.plot(ref[1:-1], self.obj_var_pred, color='orange', label='predicted')
        ax.set_title('{0}'.format(self.obj_name))
        ax.set_ylabel('{0}'.format(self.obj_name))
        ax.set_xlabel('time')
        ax.legend()
        plt.show()

    def plot_error(self, data, ref):
        # ペグパターン切り替えタイミングを計算
        period = 11
        idx1, idx2 = 3, 7  # 切り替わるタイミングのインデックス（それぞれの系列における最初の値）
        switch = np.hstack((data.peg_l[idx1::period], data.peg_l[idx2::period]))
        switch = np.sort(switch)
        
        fig, ax = plt.subplots(1, 1, figsize=(6, 3))
        ax.plot(ref[1:-1], self.obj_var_pred - self.obj_var, label='error')
        ax.plot(self.obj_var, -700 * np.ones(len(self.obj_var)), label='{0}'.format(self.obj_name), marker='.', linestyle='None', color='cornflowerblue')
        ax.plot(self.obj_var_pred, -800 * np.ones(len(self.obj_var_pred)), label='{0}, predicted'.format(self.obj_name), marker='.', linestyle='None', color='orange')
        ax.plot(data.peg_l, -900 * np.ones(len(data.peg_l)), label='peg left', marker='.', linestyle='None', color='black')
        for i in range(len(switch)):
            if i % 2 == 1 and i < len(switch) - 1:
                ax.axvspan(switch[i], switch[i+1], color='gray', alpha=0.1)
        ax.set_xlabel('time')
        ax.set_ylabel('predicted obj_var - obj_var')
        ax.legend(loc='upper right')
        plt.show()
" . 8107) ((marker . 4939) . -3031) ((marker . 4939) . -3031) ((marker . 4939) . -1371) ((marker . 4939) . -3146) ((marker . 9655) . -4183) ((marker . 4939) . -3778) ((marker . 7833) . -4127) ((marker . 3539) . -67) ((marker . 9699) . -4183) ((marker) . -4183) 12290 nil (nil rear-nonsticky nil 8097 . 8098) (nil fontified nil 4275 . 8098) (4275 . 8098) nil (4275 . 4283) ("        " . 4274) ((marker . 9699) . -8) (4274 . 4283) ("        " . 4273) ((marker . 9699) . -8) (4272 . 4282) (t 23612 8857 897489 209000) nil ("        
        
    
project = 'mouse'
datafile = 'mouse_data.csv'
unit_num = 18
data = ObsData(datafile)
# data.plot_timestamps()

ref = data.touch_r
interval = Interval(data, ref)

obj_var = interval.touch_r_next  # 目的変数
obj_name = \"touch right (next)\"
exp_var = [interval.touch_l_prev, interval.peg_r_next, interval.peg_l_next]  # 説明変数
exp_name = [\"touch left (prev)\", \"peg right (next)\", \"peg left (next)\"]
interval.set_var(obj_var, obj_name, exp_var, exp_name)

model, mse = interval.linear_regression(is_norm=True)

print(mse)
interval.plot_obj_var(ref)
interval.plot_error(data, ref)
coef = pd.DataFrame({'explanatory variables':exp_name, 'coefficient': model.coef_[0]})
coef.head()" . 9461) ((marker . 10828) . -691) ((marker . 10828) . -691) ((marker . 10828) . -691) ((marker . 9655) . -680) ((marker . 9699) . -691) ((marker) . -691) ((marker* . 9699) . 1) ((marker . 9700) . -691) ((marker* . 9701) . 2) ((marker . 9702) . -690) 10152 nil (nil rear-nonsticky nil 9460 . 9461) (nil fontified nil 8458 . 9461) (8458 . 9461) nil (8458 . 8466) ("        " . 8457) ((marker . 9699) . -8) (8457 . 8466) ("        " . 8456) ((marker . 9699) . -8) (8455 . 8465) (t 23611 64132 639294 304000) nil (6498 . 6508) (t 23611 63577 227023 912000) nil (8040 . 8041) nil undo-tree-canary))
